<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Conditional Permutation Importance â€¢ permimp</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Conditional Permutation Importance">
<meta name="description" content="An add-on to the party package, with a faster implementation of the partial-conditional permutation importance for random forests. The standard permutation importance is implemented exactly the same as in the party package. The conditional permutation importance can be computed faster, with an option to be backward compatible to the party implementation. The package is compatible with random forests fit using the party and the randomForest package. The methods are described in Strobl et al. (2007) &lt;doi:10.1186/1471-2105-8-25&gt; and Debeer and Strobl (2020) &lt;doi:10.1186/s12859-020-03622-2&gt;.">
<meta property="og:description" content="An add-on to the party package, with a faster implementation of the partial-conditional permutation importance for random forests. The standard permutation importance is implemented exactly the same as in the party package. The conditional permutation importance can be computed faster, with an option to be backward compatible to the party implementation. The package is compatible with random forests fit using the party and the randomForest package. The methods are described in Strobl et al. (2007) &lt;doi:10.1186/1471-2105-8-25&gt; and Debeer and Strobl (2020) &lt;doi:10.1186/s12859-020-03622-2&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">permimp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/permimp-package.html">The permimp-package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="conditional-permutation-importance-for-random-forests">(Conditional) Permutation Importance for Random Forests.<a class="anchor" aria-label="anchor" href="#conditional-permutation-importance-for-random-forests"></a>
</h1></div>
<p>This R-package computes the Conditional Permutation Importance (CPI; Strobl, 2008) using an alternative implementation that is both faster and more stable (<a href="https://rdcu.be/b5CrH" class="external-link">Debeer &amp; Strobl 2020</a>). The (C)PI can be computed for random forest fit using (a) the original impurity reduction method ( <code>randomForest</code>-package), and (b) using the Conditional Inference framework (<code>party</code>-package). In addition, a plotting method for the resulting <code>VarImp</code>-object is included.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package can be installed using using the <code>devtools</code>-package:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ddebeer/permimp"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>The workhorse is the <code>permimp</code>-function.</p>
<pre><code><span><span class="op">?</span><span class="va">permimp</span></span></code></pre>
<p>For documentation about the plotting function:</p>
<p><code>{?plot.VarImp} ?plot.VarImp</code></p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://party.R-forge.R-project.org" class="external-link">party</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/" class="external-link">randomForest</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ddebeer.github.io/permimp/">permimp</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">### set seed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">542863</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### get example data</span></span>
<span><span class="va">airq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/modeltools/man/ModelEnv-class.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">airquality</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Ozone</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Solar.R</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### fit a random forest</span></span>
<span><span class="co">### ... using the party package</span></span>
<span><span class="va">cfAirq5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest.html" class="external-link">cforest</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">airq</span>,</span>
<span>                    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest_control.html" class="external-link">cforest_unbiased</a></span><span class="op">(</span>mtry <span class="op">=</span> <span class="fl">3</span>, ntree <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                                               minbucket <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                               minsplit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### compute the conditional permutation importance</span></span>
<span><span class="va">permimp_cf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/permimp.html">permimp</a></span><span class="op">(</span><span class="va">cfAirq5</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">permimp_cf</span>, type <span class="op">=</span> <span class="st">"box"</span>, interval <span class="op">=</span> <span class="st">"quantile"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">### fit a random forest ...</span></span>
<span><span class="co">### ... using the randomForest package</span></span>
<span><span class="va">rfAirq5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">airq</span>,</span>
<span>                        mtry <span class="op">=</span> <span class="fl">3</span>, ntree <span class="op">=</span> <span class="fl">1000</span>, importance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        keep.forest <span class="op">=</span> <span class="cn">TRUE</span>, keep.inbag <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### compute the conditional permutation importance</span></span>
<span><span class="va">permimp_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/permimp.html">permimp</a></span><span class="op">(</span><span class="va">rfAirq5</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">permimp_rf</span>, horizontal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="parallel-processing">Parallel Processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a>
</h2>
<p>For forests with large trees parallel processing may speed up the computations. Parallel processing is possible via the <code>cl</code> argument. Under the hood, the <code>pblapply</code> function from the <a href="https://peter.solymos.org/pbapply/" class="external-link">pbapply-package</a>.</p>
<p><strong>Tip</strong>: when using parallel processing set <code>progressBar = FALSE</code>. The additional communication between the nodes for updating the progress bar will slow down the computations.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=permimp" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing permimp</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Dries Debeer <br><small class="roles"> Author, maintainer </small>  </li>
<li>Torsten Hothorn <br><small class="roles"> Author </small>  </li>
<li>Carolin Strobl <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=permimp" class="external-link"><img src="https://www.r-pkg.org/badges/version/permimp" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=permimp" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/permimp?color=blue" alt="cranlogs"></a></li>
<li><a href="https://app.codecov.io/gh/ddebeer/permimp" class="external-link"><img src="https://codecov.io/gh/ddebeer/permimp/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/ddebeer/permimp/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ddebeer/permimp/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dries Debeer, Torsten Hothorn, Carolin Strobl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
