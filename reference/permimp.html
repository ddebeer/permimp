<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Random Forest Permutation Importance for random forests — permimp • permimp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Random Forest Permutation Importance for random forests — permimp"><meta name="description" content="Standard and partial/conditional permutation importance for
    random forest-objects fit using the party or randomForest
    packages, following the permutation principle of the `mean decrease in
    accuracy' importance in randomForest . The partial/conditional permutation
    importance is implemented differently, selecting the predictions to condition
    on in each tree using Pearson Chi-squared tests applied to the
    by-split point-categorized predictors. In general the new implementation has
    similar results as the original varimp function. With
    asParty = TRUE, the partial/conditional permutation importance is
    fully backward-compatible but faster than the original varimp
    function in party."><meta property="og:description" content="Standard and partial/conditional permutation importance for
    random forest-objects fit using the party or randomForest
    packages, following the permutation principle of the `mean decrease in
    accuracy' importance in randomForest . The partial/conditional permutation
    importance is implemented differently, selecting the predictions to condition
    on in each tree using Pearson Chi-squared tests applied to the
    by-split point-categorized predictors. In general the new implementation has
    similar results as the original varimp function. With
    asParty = TRUE, the partial/conditional permutation importance is
    fully backward-compatible but faster than the original varimp
    function in party."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">permimp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/permimp-package.html">The permimp-package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Random Forest Permutation Importance for random forests</h1>

      <div class="d-none name"><code>permimp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Standard and partial/conditional permutation importance for
    random forest-objects fit using the <span class="pkg">party</span> or <span class="pkg">randomForest</span>
    packages, following the permutation principle of the `mean decrease in
    accuracy' importance in <span class="pkg">randomForest</span> . The partial/conditional permutation
    importance is implemented differently, selecting the predictions to condition
    on in each tree using Pearson Chi-squared tests applied to the
    by-split point-categorized predictors. In general the new implementation has
    similar results as the original <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code> function. With
    <code>asParty = TRUE</code>, the partial/conditional permutation importance is
    fully backward-compatible but faster than the original <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code>
    function in <span class="pkg">party</span>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">permimp</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'randomForest'</span></span>
<span><span class="fu">permimp</span><span class="op">(</span><span class="va">object</span>, nperm <span class="op">=</span> <span class="fl">1</span>, OOB <span class="op">=</span> <span class="cn">TRUE</span>, scaled <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>     conditional <span class="op">=</span> <span class="cn">FALSE</span>, threshold <span class="op">=</span> <span class="fl">.95</span>, whichxnames <span class="op">=</span> <span class="cn">NULL</span>,   </span>
<span>     thresholdDiagnostics <span class="op">=</span> <span class="cn">FALSE</span>, progressBar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>, do_check <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>     oldSeedSelection <span class="op">=</span> <span class="cn">FALSE</span>, cl <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'RandomForest'</span></span>
<span><span class="fu">permimp</span><span class="op">(</span><span class="va">object</span>, nperm <span class="op">=</span> <span class="fl">1</span>, OOB <span class="op">=</span> <span class="cn">TRUE</span>, scaled <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>     conditional <span class="op">=</span> <span class="cn">FALSE</span>, threshold <span class="op">=</span> <span class="fl">.95</span>, whichxnames <span class="op">=</span> <span class="cn">NULL</span>,   </span>
<span>     thresholdDiagnostics <span class="op">=</span> <span class="cn">FALSE</span>, progressBar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>     pre1.0_0 <span class="op">=</span> <span class="va">conditional</span>, AUC <span class="op">=</span> <span class="cn">FALSE</span>, asParty <span class="op">=</span> <span class="cn">FALSE</span>, mincriterion <span class="op">=</span> <span class="fl">0</span>, </span>
<span>     oldSeedSelection <span class="op">=</span> <span class="cn">FALSE</span>, cl <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an object as returned by <code>cforest</code> or <code>randomForest</code>.</p></dd>

  <dt id="arg-mincriterion">mincriterion<a class="anchor" aria-label="anchor" href="#arg-mincriterion"></a></dt>
<dd><p>the value of the test statistic or 1 - p-value that
                       must be exceeded in order to include a split in the
                       computation of the importance. The default
                       <code>mincriterion = 0</code> guarantees that all splits
                       are included.</p></dd>

  <dt id="arg-conditional">conditional<a class="anchor" aria-label="anchor" href="#arg-conditional"></a></dt>
<dd><p>a logical that determines whether unconditional or conditional
                      permutation is performed.</p></dd>

  <dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>the threshold value for (1 - p-value) of the association
                    between the predictor of interest and another predictor, which
                    must be exceeded in order to include the other predictor in
                    the conditioning scheme for the predictor of interest (only
                    relevant if <code>conditional = TRUE</code>). A threshold value of
                    zero includes all other predictors.</p></dd>

  <dt id="arg-nperm">nperm<a class="anchor" aria-label="anchor" href="#arg-nperm"></a></dt>
<dd><p>the number of permutations performed.</p></dd>

  <dt id="arg-oob">OOB<a class="anchor" aria-label="anchor" href="#arg-oob"></a></dt>
<dd><p>a logical that determines whether the importance is computed from
              the out-of-bag sample or the learning sample (not suggested).</p></dd>

  <dt id="arg-pre-">pre1.0_0<a class="anchor" aria-label="anchor" href="#arg-pre-"></a></dt>
<dd><p>Prior to <span class="pkg">party</span> version 1.0-0, the actual data values
                   were permuted according to the original permutation
                   importance suggested by Breiman (2001). Now the assignments
                   to child nodes of splits in the variable of interest
                   are permuted as described by Hapfelmeier et al. (2012),
                   which allows for missing values in the predictors and is
                   more efficient with respect to memory consumption and
                   computing time. This method does not apply to the conditional
                   permutation importance, nor to random forests that were not
                   fit using the <span class="pkg">party</span> package.</p></dd>

  <dt id="arg-scaled">scaled<a class="anchor" aria-label="anchor" href="#arg-scaled"></a></dt>
<dd><p>a logical that determines whether the differences in prediction
                 accuracy should be scaled by the total (null-model) error.</p></dd>

  <dt id="arg-auc">AUC<a class="anchor" aria-label="anchor" href="#arg-auc"></a></dt>
<dd><p>a logical that determines whether the Area Under the Curve (AUC)
              instead of the accuracy is used to compute the permutation
			  importance (cf. Janitza et al., 2012). The AUC-based permutation
			  importance is more robust towards class imbalance, but it is
			  only applicable to binary classification.</p></dd>

  <dt id="arg-asparty">asParty<a class="anchor" aria-label="anchor" href="#arg-asparty"></a></dt>
<dd><p>a logical that determines whether or not exactly the same
                  values as the original <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code> function in
				  <span class="pkg">party</span> should be obtained.</p></dd>

  <dt id="arg-whichxnames">whichxnames<a class="anchor" aria-label="anchor" href="#arg-whichxnames"></a></dt>
<dd><p>a character vector containing the predictor variable
                      names for which the permutation importance should be
					  computed. Only use when aware of the implications, see
					  section 'Details'.</p></dd>

  <dt id="arg-thresholddiagnostics">thresholdDiagnostics<a class="anchor" aria-label="anchor" href="#arg-thresholddiagnostics"></a></dt>
<dd><p>a logical that specifies whether diagnostics
                               with respect to the threshold-value should be
							   prompted as warnings.</p></dd>

  <dt id="arg-progressbar">progressBar<a class="anchor" aria-label="anchor" href="#arg-progressbar"></a></dt>
<dd><p>a logical that determines whether a progress bar should
                      be displayed.</p></dd>

  <dt id="arg-do-check">do_check<a class="anchor" aria-label="anchor" href="#arg-do-check"></a></dt>
<dd><p>a logical that determines whether a check requiring user
                   input should be included.</p></dd>

  <dt id="arg-oldseedselection">oldSeedSelection<a class="anchor" aria-label="anchor" href="#arg-oldseedselection"></a></dt>
<dd><p>a logical that determines whether the selection of
                           random numbers should be the same is in the 1.1
                           version of the package. The default is <code>FALSE</code>,
                           so that seeds are generated for each tree, and the
                           results are reproducible, also when parallel processing
                           is used.</p></dd>

  <dt id="arg-cl">cl<a class="anchor" aria-label="anchor" href="#arg-cl"></a></dt>
<dd><p>A cluster object created by <code>makeCluster</code>, or an
             integer to indicate number of child-processes (integer values
             are ignored on Windows) for parallel evaluations (see Details
             on parallel computing). <code>NULL</code> (default) refers to sequential
             evaluation.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments to be passed to the Methods</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>Function <code>permimp</code> is highly comparable to <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code> in <span class="pkg">party</span>,
  but the partial/conditional variable importance has a different, more efficient
  implementation. Compared to the original <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code> in <span class="pkg">party</span>,
  <code>permimp</code> applies a different strategy to select the predictors to condition
  on (ADD REFERENCE TO PAPER).</p>
<p>With <code>asParty = TRUE</code>, permimp returns exactly the same values as
  <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code> in <span class="pkg">party</span>, but the computation is done more efficiently.</p>
<p>If <code>conditional = TRUE</code>, the importance of each variable is computed by
  permuting within a grid defined by the predictors that are associated
  (with 1 - p-value greater than <code>threshold</code>) to the variable of interest.
  The <code>threshold</code> can be interpreted as a parameter that moves the permutation
  importance across a dimension from fully conditional (<code>threshold = 0</code>) to
  completely unconditional (<code>threshold = 1</code>), see Debeer and Strobl (2020).</p>
<p>Using the <code>wichxnames</code> argument, the computation of the permutation importance
  can be limited to a smaller number of specified predictors. Note, however, that when
  <code>conditional = TRUE</code>, the (other) predictors to condition on are also
  limited to this selection of predictors. Only use when fully aware of the
  implications.</p>
<p>For parallel processing, the <span class="pkg">pbapply</span> package, a wrapper around the <span class="pkg">parallel</span>
  package is used. Parallel processing can be enabled through the <code>cl</code>
  argument.  <code>parLapply</code> is called when <code>cl</code> is a 'cluster'
  object, <code>mclapply</code> is called when <code>cl</code> is an integer.</p>
<p>When doing parallel processing, other objects might need to pushed to the
  workers, and random numbers must be handled with care (see the Examples of the
  <span class="pkg">pbapply</span> package).</p>
<p>When using parallel processing, showing the progress bar increases the
  communication overhead between the main process and nodes / child processes
  compared to the parallel equivalents of the functions without the progress bar.
  The functions fall back to their original equivalents when
  <code>progressBar = FALSE</code>. This is the default when <code><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive()</a></code> is
  <code>FALSE</code> (i.e. called from command line R script)</p>
<p>For further details, please refer to the documentation of <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code>, with the mean decrease in accuracy
    as its <code>$values</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>


<p>Leo Breiman (2001). Random Forests. <em>Machine Learning</em>, 45(1), 5–32.</p>
<p>Alexander Hapfelmeier, Torsten Hothorn, Kurt Ulm, and Carolin Strobl (2012).
    A New Variable Importance Measure for Random Forests with Missing Data.
    <em>Statistics and Computing</em>, <a href="https://link.springer.com/article/10.1007/s11222-012-9349-1" class="external-link">https://link.springer.com/article/10.1007/s11222-012-9349-1</a></p>
<p>Torsten Hothorn, Kurt Hornik, and Achim Zeileis (2006b). Unbiased
    Recursive Partitioning: A Conditional Inference Framework.
    <em>Journal of Computational and Graphical Statistics</em>, <b>15</b> (3),
    651-674.  Preprint available from
    <a href="https://www.zeileis.org/papers/Hothorn+Hornik+Zeileis-2006.pdf" class="external-link">https://www.zeileis.org/papers/Hothorn+Hornik+Zeileis-2006.pdf</a></p>
<p>Silke Janitza, Carolin Strobl and Anne-Laure Boulesteix (2013). An AUC-based
    Permutation Variable Importance Measure for Random Forests.
    BMC Bioinformatics.2013, <b>14</b> 119.
    <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-14-119" class="external-link">https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-14-119</a></p>
<p>Carolin Strobl, Anne-Laure Boulesteix, Thomas Kneib, Thomas Augustin, and
    Achim Zeileis (2008). Conditional Variable Importance for Random Forests.
    <em>BMC Bioinformatics</em>, <b>9</b>, 307.
    <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-9-307" class="external-link">https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-9-307</a></p>
<p>Debeer Dries and Carolin Strobl (2020). Conditional Permutation Importance
    Revisited. <em>BMC Bioinformatics</em>, <b>21</b>, 307.
    <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-020-03622-2" class="external-link">https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-020-03622-2</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></code>, <code><a href="VarImp.html">VarImp</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">### for RandomForest-objects, by party::cforest()  </span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">readingSkills.cf</span> <span class="op">&lt;-</span> <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest.html" class="external-link">cforest</a></span><span class="op">(</span><span class="va">score</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="fu">party</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/party/man/readingSkills.html" class="external-link">readingSkills</a></span>, </span></span>
<span class="r-in"><span>                              control <span class="op">=</span> <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest_control.html" class="external-link">cforest_unbiased</a></span><span class="op">(</span>mtry <span class="op">=</span> <span class="fl">2</span>, ntree <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">### conditional importance, may take a while...</span></span></span>
<span class="r-in"><span>  <span class="co"># party implementation:</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></span><span class="op">(</span><span class="va">readingSkills.cf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     11.060828     47.984469      1.457061 </span>
<span class="r-in"><span>  <span class="co"># faster implementation but same results</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.cf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, asParty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     11.060828     47.984469      1.457061 </span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># different implementation with similar results</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.cf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, asParty <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     12.640102     50.529059      1.532613 </span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">### standard (unconditional) importance is unchanged</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/varimp.html" class="external-link">varimp</a></span><span class="op">(</span><span class="va">readingSkills.cf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      12.40733      73.35346      20.63118 </span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.cf</span>, oldSeedSelection <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      12.40733      73.35346      20.63118 </span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">###</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">readingSkills.rf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></span><span class="op">(</span><span class="va">score</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="fu">party</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/party/man/readingSkills.html" class="external-link">readingSkills</a></span>, </span></span>
<span class="r-in"><span>                              mtry <span class="op">=</span> <span class="fl">2</span>, ntree <span class="op">=</span> <span class="fl">25</span>, importance <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>                              keep.forest <span class="op">=</span> <span class="cn">TRUE</span>, keep.inbag <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>                              </span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>  <span class="co">### (unconditional) Permutation Importance</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.rf</span>, do_check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      17.75154      85.57181      12.78995 </span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># very close to</span></span></span>
<span class="r-in"><span>  <span class="va">readingSkills.rf</span><span class="op">$</span><span class="va">importance</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      17.65385      82.11491      13.86879 </span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">### Conditional Permutation Importance</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.rf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, threshold <span class="op">=</span> <span class="fl">.8</span>, do_check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nativeSpeaker           age      shoeSize </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   14.19811819   15.16896923   -0.01609468 </span>
<span class="r-in"><span>                              </span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="co">### Parallel processing - Windows</span></span></span>
<span class="r-in"><span>  <span class="co"># Only relevant for large trees, for small trees, there may not even be a </span></span></span>
<span class="r-in"><span>  <span class="co"># 'speed up', but a 'slow down'</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># Make a larger forest</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">readingSkills.cf</span> <span class="op">&lt;-</span> <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest.html" class="external-link">cforest</a></span><span class="op">(</span><span class="va">score</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="fu">party</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/party/man/readingSkills.html" class="external-link">readingSkills</a></span>, </span></span>
<span class="r-in"><span>                                     control <span class="op">=</span> <span class="fu">party</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/party/man/cforest_control.html" class="external-link">cforest_unbiased</a></span><span class="op">(</span>mtry <span class="op">=</span> <span class="fl">2</span>, </span></span>
<span class="r-in"><span>                                                                       ntree <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># sequentiall processing</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.cf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, asParty <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># parallel processing</span></span></span>
<span class="r-in"><span>  <span class="co"># note that the results are reproducible despite using multiple cores</span></span></span>
<span class="r-in"><span>  <span class="va">cluster</span> <span class="op">&lt;-</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">290875</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">permimp</span><span class="op">(</span><span class="va">readingSkills.cf</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>                            asParty <span class="op">=</span> <span class="cn">FALSE</span>, cl <span class="op">=</span> <span class="va">cluster</span>, progressBar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cluster</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dries Debeer, Torsten Hothorn, Carolin Strobl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

